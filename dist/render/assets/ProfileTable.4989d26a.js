import{d as G,a2 as T,r as x,c as q,a3 as B,a6 as H,a9 as s,ah as b,aa as o,a5 as e,bU as J,a8 as L,bV as Q,a4 as A,bW as X,ao as Y,ab as Z,ad as d,ai as M,U as oo,aR as eo,al as so}from"./main.2046a1e9.js";import{_ as no}from"./ProfileSummary.82338a3e.js";import{u as z,a as I,b as lo,C as to,S as ao,c as io,A as ro,I as co,D as uo,d as _o,e as po,f as fo,_ as mo,g as go,h as ko}from"./ShareOnCloud.b7732c6b.js";import{_ as vo}from"./Select.d3505bfe.js";import{_ as ho,a as wo}from"./DataTable.d4de5335.js";import{_ as yo}from"./Input.866ab710.js";import{_ as Po}from"./Dropdown.b3c364ce.js";import{_ as Co}from"./Space.0022c150.js";import{_ as So,a as xo}from"./Grid.73bd99ae.js";const Bo=b("div",null,"Assign to group",-1),bo={class:"d-flex flex-row mt-3 mb-2 align-items-center"},$o=G({setup(w){const{showModals:c}=z(),{checkedRowKeys:y}=I(),a=lo(),{list:n}=T(a),i=x([]),P=q(()=>n.value.map((t,l)=>({label:t.name,value:l}))),m=()=>{i.value=[],c.assignBulkProfiles=!1},g=async()=>{try{window.$message.loading("Assigning..."),await a.assignBulkProfiles(i.value,y.value),window.$message.success("Profile assigned"),m()}catch{window.$message.info("Profile assign failed")}finally{window.$message.destroyAll()}};return(t,l)=>{const k=vo,C=J;return B(),H(C,{id:"modal-assign-profiles",show:e(c).assignBulkProfiles,"onUpdate:show":l[1]||(l[1]=u=>e(c).assignBulkProfiles=u),"transform-origin":"center",preset:"dialog",title:"","positive-text":"Assign","negative-text":"Cancel","mask-closable":!1,onPositiveClick:g,onNegativeClick:m},{header:s(()=>[Bo]),default:s(()=>[b("div",bo,[o(k,{value:i.value,"onUpdate:value":l[0]||(l[0]=u=>i.value=u),filterable:"",multiple:"",options:e(P)},null,8,["value","options"])])]),_:1},8,["show"])}}}),Ao={key:0,class:"bulk-actions py-2"},Mo=d(" Start "),Go=d(" Stop "),To=d(" Assign to group "),zo={class:"flex mt-2"},jo=G({props:{profiles:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(w,{expose:c}){const y=w,a=L(),{pagination:n}=T(a),{profiles:i}=Q(y),{rowProps:P,profileColumns:m,selectedProfile:g,selectedProfiles:t}=z(),{bulkMoreActions:l,checkedRowKeys:k,cancelBulk:C,startBulkProfiles:u,stopBulkProfiles:U,handleSelectBulkMore:N,assignProfilesToGroup:R,shareProfilesOnCloud:Io,stopShareProfilesOnCloud:Uo}=I(),K=x(1),v=x(""),V=async()=>{const h=n.value.limit*(K.value-1);await a.getProfiles({offset:h,search:v.value})},D=async h=>{const r=n.value.limit*(h-1);await a.getProfiles({offset:r,search:v.value})};return c({checkedRowKeys:k}),(h,r)=>{const O=yo,_=eo,p=so,E=Po,S=Co,F=ho,W=wo,$=So,j=xo;return B(),A(oo,null,[o(S,null,{default:s(()=>[o(O,{value:v.value,"onUpdate:value":r[0]||(r[0]=f=>v.value=f),type:"text",placeholder:"Search...",clearable:"",onKeyup:X(V,["enter"])},null,8,["value","onKeyup"]),o(j,{"x-gap":"12",cols:3},{default:s(()=>[o($,{span:"2"},{default:s(()=>[e(k).length?(B(),A("div",Ao,[o(S,null,{default:s(()=>[o(p,{size:"small",ghost:"",onClick:e(C)},{icon:s(()=>[o(_,null,{default:s(()=>[o(e(to))]),_:1})]),_:1},8,["onClick"]),o(p,{size:"small",type:"primary",onClick:e(u)},{icon:s(()=>[o(_,null,{default:s(()=>[o(e(ao))]),_:1})]),default:s(()=>[Mo]),_:1},8,["onClick"]),o(p,{size:"small",ghost:"",type:"error",onClick:e(U)},{icon:s(()=>[o(_,null,{default:s(()=>[o(e(io))]),_:1})]),default:s(()=>[Go]),_:1},8,["onClick"]),o(p,{size:"small",ghost:"",type:"success",onClick:e(R)},{icon:s(()=>[o(_,null,{default:s(()=>[o(e(ro))]),_:1})]),default:s(()=>[To]),_:1},8,["onClick"]),o(E,{trigger:"hover",options:e(l),onSelect:e(N)},{default:s(()=>[o(p,{size:"small"},{default:s(()=>[o(_,null,{default:s(()=>[o(e(co))]),_:1})]),_:1})]),_:1},8,["options","onSelect"])]),_:1})])):Y("",!0),o(S,{vertical:""},{default:s(()=>[o(F,{"checked-row-keys":e(t),"onUpdate:checked-row-keys":r[1]||(r[1]=f=>Z(t)?t.value=f:null),columns:e(m),data:e(i),"row-props":e(P),"row-key":f=>f.id,loading:w.loading,"max-height":700},null,8,["checked-row-keys","columns","data","row-props","row-key","loading"]),b("div",zo,[o(W,{class:"order-2 ml-auto","item-count":e(n).total,"page-size":e(n).limit,"on-update:page":D},{prefix:s(()=>[d(" Total is "+M(e(n).total),1)]),suffix:s(()=>[d(M(e(n).limit)+" / page ",1)]),_:1},8,["item-count","page-size"])])]),_:1})]),_:1}),o($,null,{default:s(()=>[o(no,{profile:e(g)?e(g):void 0},null,8,["profile"])]),_:1})]),_:1})]),_:1}),o(uo),o(_o),o(po),o(fo),o(mo),o(go),o($o),o(ko)],64)}}});export{jo as _};
