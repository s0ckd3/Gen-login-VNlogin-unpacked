import{bD as V,c as g,r as G,aM as A,j as P,d as I,o as L,at as N,h as $,b4 as Q,X as q,m as D,W as x,K as T,t as X,V as z,aI as F,b0 as U,aA as W}from"./main.2046a1e9.js";import{b as Y}from"./next-frame-once.e0fd6a2a.js";import{g as H}from"./Space.0022c150.js";function J(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(a=>{if(a==="")return;const[r,t]=a.split(":");t===void 0?n[""]=r:n[r]=t}),n}function b(e,n){var a;if(e==null)return;const r=J(e);if(n===void 0)return r[""];if(typeof n=="string")return(a=r[n])!==null&&a!==void 0?a:r[""];if(Array.isArray(n)){for(let t=n.length-1;t>=0;--t){const s=n[t];if(s in r)return r[s]}return r[""]}else{let t,s=-1;return Object.keys(r).forEach(o=>{const i=Number(o);!Number.isNaN(i)&&n>=i&&i>=s&&(s=i,t=r[o])}),t}}const Z={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function K(e){return`(min-width: ${e}px)`}const y={};function ee(e=Z){if(!V)return g(()=>[]);if(typeof window.matchMedia!="function")return g(()=>[]);const n=G({}),a=Object.keys(e),r=(t,s)=>{t.matches?n.value[s]=!0:n.value[s]=!1};return a.forEach(t=>{const s=e[t];let o,i;y[s]===void 0?(o=window.matchMedia(K(s)),o.addEventListener?o.addEventListener("change",f=>{i.forEach(p=>{p(f,t)})}):o.addListener&&o.addListener(f=>{i.forEach(p=>{p(f,t)})}),i=new Set,y[s]={mql:o,cbs:i}):(o=y[s].mql,i=y[s].cbs),i.add(r),o.matches&&i.forEach(f=>{f(o,t)})}),A(()=>{a.forEach(t=>{const{cbs:s}=y[e[t]];s.has(r)&&s.delete(r)})}),g(()=>{const{value:t}=n;return a.filter(s=>t[s])})}const E=1,k=P("n-grid"),M=1,j={span:{type:[Number,String],default:M},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},ie=q(j);var ae=I({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:j,setup(){const{xGapRef:e,itemStyleRef:n,overflowRef:a}=L(k),r=Q();return{overflow:a,itemStyle:n,deriveStyle:()=>{const{privateSpan:t=M,privateShow:s=!0,privateColStart:o=void 0,privateOffset:i=0}=r.vnode.props,{value:f}=e,p=N(f||0);return{display:s?"":"none",gridColumn:`${o!=null?o:`span ${t}`} / span ${t}`,marginLeft:i?`calc((100% - (${t} - 1) * ${p}) / ${t} * ${i} + ${p} * ${i})`:""}}}},render(){var e,n;return $("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}});const te={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},O=24,ne={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:O},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var le=I({name:"Grid",inheritAttrs:!1,props:ne,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:a}=D(e),r=/^\d+$/,t=G(void 0),s=ee((a==null?void 0:a.value)||te),o=x(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),i=g(()=>{if(!!o.value)return e.responsive==="self"?t.value:s.value}),f=x(()=>{var u;return(u=Number(b(e.cols.toString(),i.value)))!==null&&u!==void 0?u:O}),p=x(()=>b(e.xGap.toString(),i.value)),C=x(()=>b(e.yGap.toString(),i.value)),v=u=>{t.value=u.contentRect.width},_=u=>{Y(v,u)},m=G(!1),d=g(()=>{if(e.responsive==="self")return _});return T(k,{itemStyleRef:X(e,"itemStyle"),xGapRef:p,overflowRef:m}),{mergedClsPrefix:n,style:g(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:N(p.value),rowGap:N(C.value)})),isResponsive:o,responsiveQuery:i,responsiveCols:f,handleResize:d,overflow:m}},render(){const e=()=>{var n,a,r,t,s,o;this.overflow=!1;const i=F(H(this)),f=[],{collapsed:p,collapsedRows:C,responsiveCols:v,responsiveQuery:_}=this;i.forEach(l=>{var S,h,c;if(((S=l==null?void 0:l.type)===null||S===void 0?void 0:S.__GRID_ITEM__)!==!0)return;const R=U(l),B=Number((c=b((h=R.props)===null||h===void 0?void 0:h.span,_))!==null&&c!==void 0?c:E);B!==0&&f.push({child:R,rawChildSpan:B})});let m=0;const d=(n=f[f.length-1])===null||n===void 0?void 0:n.child;if(d!=null&&d.props){const l=(a=d.props)===null||a===void 0?void 0:a.suffix;l!==void 0&&l!==!1&&(m=(t=(r=d.props)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:E,d.props.privateSpan=m,d.props.privateColStart=v+1-m,d.props.privateShow=!0)}let u=0,w=!1;for(const{child:l,rawChildSpan:S}of f){if(w&&(this.overflow=!0),!w){const h=Number((o=b((s=l.props)===null||s===void 0?void 0:s.offset,_))!==null&&o!==void 0?o:0),c=Math.min(S+h,v)||1;if(l.props?(l.props.privateSpan=c,l.props.privateOffset=h):l.props={privateSpan:c,privateOffset:h},p){const R=u%v;c+R>v&&(u+=v-R),c+u+m>C*v?w=!0:u+=c}}w&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return $("div",W({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),f.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?$(z,{onResize:this.handleResize},{default:e}):e()}});export{ae as _,le as a,j as b,ie as g};
